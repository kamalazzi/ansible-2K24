from flask import Flask, request, render_template_string

app = Flask(__name__)

# HTML form template
form_template = """
<!DOCTYPE html>
<html>
<body>

<h2>Configuration Form</h2>
<form action="/submit_form" method="post">
  <label for="hostname">Hostname:</label><br><br>
  <input type="text" id="hostname" name="hostname"><br><br>
  
  <label for="ip">IP Address:</label><br><br>
  <input type="text" id="ip" name="ip"><br><br>
  
  <label for="username">Username:</label><br><br>
  <input type="text" id="username" name="username"><br><br>
  
  <label for="password">Password:</label><br><br>
  <input type="password" id="password" name="password"><br><br>
  
  <input type="submit" value="Submit">
</form>

</body>
</html>
"""

@app.route('/')
def form():
    return render_template_string(form_template)

@app.route('/submit_form', methods=['POST'])
def submit_form():
    hostname = request.form['hostname']
    ip = request.form['ip']
    username = request.form['username']
    password = request.form['password']
    
    # Create Ansible playbook
    playbook_content = f"""
- hosts: {hostname}
  vars:
    ansible_host: {ip}
    ansible_user: {username}
    ansible_password: {password}
  tasks:
    - name: Test connection
      ping:
    """
    
    # Save playbook to a file
    with open('playbook.yml', 'w') as file:
        file.write(playbook_content)
    
    return f"Ansible playbook created:<br><pre>{playbook_content}</pre>"

if __name__ == '__main__':
    app.run(debug=True)
